{"ast":null,"code":"var _jsxFileName = \"/Users/anirudhrv/Desktop/Misc/InteractiveImageAnnotation/Application/ImageAnnotation/Client/src/SPA_components/WorkingArea.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\nclass WorkingArea extends Component {\n  //TODO : ADD INTRODUCTION TO PROJECT\n  constructor() {\n    super();\n\n    this.onButton = () => {\n      this.flag = true;\n      this.initDraw(this.divCanvas, this.flag, this.outputdiv);\n    };\n\n    this.offButton = () => {\n      this.flag = false;\n      this.initDraw(this.divCanvas, this.flag, this.outputdiv);\n    };\n\n    this.initDraw = (drawElement, flag, outputdiv) => {\n      function setMousePosition(e) {\n        var ev = e || window.event; //Moz || IE\n\n        if (ev.pageX) {\n          //Moz\n          mouse.x = ev.pageX;\n          mouse.y = ev.pageY;\n        } else if (ev.clientX) {\n          //IE\n          mouse.x = ev.clientX;\n          mouse.y = ev.clientY;\n        }\n      }\n\n      ;\n      var mouse = {\n        x: 0,\n        y: 0,\n        startX: 0,\n        startY: 0\n      };\n      var element = null;\n\n      drawElement.onmousemove = function (e) {\n        // draw only when flad is On\n        if (flag) {\n          setMousePosition(e);\n\n          if (element !== null) {\n            element.style.width = Math.abs(mouse.x - mouse.startX) + 'px';\n            element.style.height = Math.abs(mouse.y - mouse.startY) + 'px';\n            element.style.left = mouse.x - mouse.startX < 0 ? mouse.x + 'px' : mouse.startX + 'px';\n            element.style.top = mouse.y - mouse.startY < 0 ? mouse.y + 'px' : mouse.startY + 'px';\n          }\n        }\n      };\n\n      drawElement.onclick = function (e) {\n        if (flag) {\n          if (element !== null) {\n            element = null;\n            drawElement.style.cursor = \"default\";\n            this.EndX = mouse.x;\n            this.EndY = mouse.y - 125;\n            var dataDrawn = \"(\" + this.StartX + \",\" + this.StartY + \") (\" + this.EndX + \",\" + this.EndY + \")\";\n            this.imageTextData = dataDrawn;\n            outputdiv.innerHTML = outputdiv.innerHTML + \"\\n\" + dataDrawn;\n          } else {\n            mouse.startX = mouse.x;\n            mouse.startY = mouse.y;\n            element = document.createElement('div');\n            element.className = 'rectangle';\n            element.style.left = mouse.x + 'px';\n            element.style.top = mouse.y + 'px';\n            drawElement.appendChild(element);\n            drawElement.style.cursor = \"crosshair\";\n            this.StartX = mouse.x;\n            this.StartY = mouse.y - 125;\n          }\n        }\n      };\n    };\n\n    this.saveastextfile = () => {\n      // send to nodejs to save\n      axios.post(\"http://192.168.1.8:4000/saveastextfile/\", {\n        username: this.props.name,\n        imagename: this.state.ImageNames[this.state.index],\n        imagedata: this.outputdiv.innerHTML\n      }).then(res => {\n        // then print response status\n        console.log(res);\n      }).catch(err => {\n        // then print response status\n        console.log(err);\n      });\n    };\n\n    this.NextImage = () => {\n      // clearing out previously draw boxes and adding back the image tag\n      this.divCanvas.innerHTML = \"\";\n      this.divCanvas.appendChild(this.ImageTag);\n\n      if (this.state.index > this.state.ImageNames.length - 2) {// Do nothing\n      } else {\n        this.state.index = this.state.index + 1;\n\n        if (this.ImageTag) {\n          this.ImageTag.src = \"http://192.168.1.8:4000/img/\" + this.props.name + \"/images/\" + this.state.ImageNames[this.state.index];\n        }\n      }\n\n      this.outputdiv.innerHTML = \"\";\n    };\n\n    this.PrevImage = () => {\n      // clearing out previously draw boxes and adding back the image tag\n      this.divCanvas.innerHTML = \"\";\n      this.divCanvas.appendChild(this.ImageTag);\n\n      if (this.state.index == 0) {} else {\n        this.state.index = this.state.index - 1;\n\n        if (this.ImageTag) {\n          this.ImageTag.src = \"http://192.168.1.8:4000/img/\" + this.props.name + \"/images/\" + this.state.ImageNames[this.state.index];\n        }\n      }\n\n      this.outputdiv.innerHTML = \"\";\n    };\n\n    this.testSaveText = () => {\n      var data = this.state.ImageNames[this.state.index] + \",\" + this.outputdiv.innerHTML;\n      axios.post(\"http://192.168.1.8:8080/saveastextfile\", data).then(res => {\n        // then print response status\n        console.log(res);\n      }).catch(err => {\n        // then print response status\n        console.log(err);\n      });\n    };\n\n    this.getmloutput = () => {\n      var username = this.props.name;\n      var imagename = this.state.ImageNames[this.state.index];\n      var url = \"http://192.168.1.8:4000/img/\" + this.props.name + \"/images/\" + this.state.ImageNames[this.state.index];\n      var mloutputurl = \"http://192.168.1.8:4000/img/\" + this.props.name + \"/images/mloutput_\" + this.props.name + \"_\" + imagename;\n      var data = {\n        'username': username,\n        'imagename': imagename,\n        'imageurl': url\n      };\n      axios.post(\"http://localhost:8000/index/\", data).then(res => {\n        // then print response status\n        console.log(res);\n        window.open(mloutputurl, '_blank');\n      }).catch(err => {\n        // then print response status\n        console.log(err);\n      });\n    };\n\n    this.Apifuncgetimages = userName => {\n      // data is going to be the username\n      axios.post(\"http://localhost:8080/getimages\", userName).then(res => {\n        // then print response status\n        console.log(res);\n        var ImageNames = res.data[\"data\"].split(\"</br>\");\n        ImageNames.pop();\n        this.state.ImageNames = ImageNames;\n\n        if (this.ImageTag) {\n          this.ImageTag.src = \"http://192.168.1.8:4000/img/\" + this.props.name + \"/images/\" + this.state.ImageNames[this.state.index];\n        }\n      }).catch(err => {\n        // then print response status\n        console.log(err);\n      });\n    };\n\n    this.downloadfiles = () => {\n      axios.post(\"http://localhost:4000/downloadfiles/\", {\n        username: this.props.name\n      }).then(res => {\n        // then print response status\n        console.log(res); // after creating the zip file, now download\n\n        window.open('http://192.168.1.8:4000/img/' + this.props.name + '.zip');\n      }).catch(err => {\n        // then print response status\n        console.log(err);\n      });\n    };\n\n    this.wait = ms => {\n      var d = new Date();\n      var d2 = null;\n\n      do {\n        d2 = new Date();\n      } while (d2 - d < ms);\n    };\n\n    this.downloadallfiles = () => {\n      axios.post(\"http://localhost:4000/downloadallfiles/\", {\n        username: this.props.name\n      }).then(res => {\n        // then print response status\n        //toast.success('upload success')\n        console.log(res); // after creating the zip file, now download, delay for zip file creation\n\n        this.wait(5000);\n        this.testall();\n      }).catch(err => {\n        // then print response status\n        console.log(err);\n      });\n    };\n\n    this.testall = () => {\n      window.open('http://localhost:4000/img/all_' + this.props.name + '.zip');\n    };\n\n    this.state = {\n      index: 0\n    };\n  }\n\n  componentDidMount() {\n    // Call GO API to get all the image names of username\n    this.Apifuncgetimages(this.props.name); // setting environment variables\n\n    this.flag = false;\n    this.startX = 0;\n    this.EndX = 0;\n    this.StartY = 0;\n    this.EndY = 0;\n    this.imageTextData = \" \";\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"columnLeft\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, \"Left Side\"), React.createElement(\"div\", {\n      ref: c => this.divCanvas = c,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"name\",\n      ref: c => this.ImageTag = c,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"columnRight\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, \"Right Side\"), React.createElement(\"button\", {\n      type: \"button\",\n      class: \"buttonclass\",\n      onClick: this.NextImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, \"NEXT\"), React.createElement(\"button\", {\n      type: \"button\",\n      class: \"buttonclass\",\n      onClick: this.PrevImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, \"PREVIOUS\"), React.createElement(\"button\", {\n      className: \"buttonclass\",\n      onClick: this.onButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, \"ON\"), React.createElement(\"button\", {\n      className: \"buttonclass\",\n      onClick: this.offButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, \"OFF\"), React.createElement(\"button\", {\n      className: \"buttonclass\",\n      onClick: this.saveastextfile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, \"SAVE\"), React.createElement(\"button\", {\n      className: \"buttonclass\",\n      onClick: this.getmloutput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, \"CHECK ML OUTPUT\"), React.createElement(\"button\", {\n      className: \"buttonclass\",\n      onClick: this.downloadfiles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, \"DOWNLOAD DATA\"), React.createElement(\"button\", {\n      className: \"buttonclass\",\n      onClick: this.downloadallfiles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"DOWNLOAD ALL\")), React.createElement(\"p\", {\n      hidden: true,\n      ref: c => this.outputdiv = c,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default WorkingArea;","map":{"version":3,"sources":["/Users/anirudhrv/Desktop/Misc/InteractiveImageAnnotation/Application/ImageAnnotation/Client/src/SPA_components/WorkingArea.js"],"names":["React","Component","axios","WorkingArea","constructor","onButton","flag","initDraw","divCanvas","outputdiv","offButton","drawElement","setMousePosition","e","ev","window","event","pageX","mouse","x","y","pageY","clientX","clientY","startX","startY","element","onmousemove","style","width","Math","abs","height","left","top","onclick","cursor","EndX","EndY","dataDrawn","StartX","StartY","imageTextData","innerHTML","document","createElement","className","appendChild","saveastextfile","post","username","props","name","imagename","state","ImageNames","index","imagedata","then","res","console","log","catch","err","NextImage","ImageTag","length","src","PrevImage","testSaveText","data","getmloutput","url","mloutputurl","open","Apifuncgetimages","userName","split","pop","downloadfiles","wait","ms","d","Date","d2","downloadallfiles","testall","componentDidMount","render","c"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\nclass WorkingArea extends Component {\n//TODO : ADD INTRODUCTION TO PROJECT\n\nconstructor(){\n  super();\n  this.state= {\n    index:0,\n  }\n}\n\nonButton = () => {\n  this.flag = true;\n  this.initDraw(this.divCanvas,this.flag,this.outputdiv);\n\n}\n\noffButton = () => {\n  this.flag= false;\n  this.initDraw(this.divCanvas,this.flag,this.outputdiv );\n}\n\ninitDraw= (drawElement,flag,outputdiv) => {\n    function setMousePosition(e) {\n        var ev = e || window.event; //Moz || IE\n        if (ev.pageX) { //Moz\n            mouse.x = ev.pageX;\n            mouse.y = ev.pageY;\n        }\n        else if (ev.clientX) { //IE\n            mouse.x = ev.clientX ;\n            mouse.y = ev.clientY ;\n        }\n    };\n    var mouse = {\n        x: 0,\n        y: 0,\n        startX: 0,\n        startY: 0\n    };\n    var element = null;\n    drawElement.onmousemove = function (e) {\n      // draw only when flad is On\n      if(flag) {\n        setMousePosition(e);\n        if (element !== null) {\n            element.style.width = Math.abs(mouse.x - mouse.startX) + 'px';\n            element.style.height = Math.abs(mouse.y - mouse.startY) + 'px';\n            element.style.left = (mouse.x - mouse.startX < 0) ? mouse.x + 'px' : mouse.startX + 'px';\n            element.style.top = (mouse.y - mouse.startY < 0) ? mouse.y + 'px' : mouse.startY + 'px';\n        }\n      }\n    }\n    drawElement.onclick = function (e) {\n      if(flag) {\n        if (element !== null) {\n            element = null;\n            drawElement.style.cursor = \"default\";\n            this.EndX = mouse.x;\n            this.EndY = mouse.y - 125;\n            var dataDrawn = \"(\"+this.StartX+\",\"+this.StartY+\") (\"+this.EndX+\",\"+this.EndY+\")\"\n            this.imageTextData = dataDrawn\n            outputdiv.innerHTML = outputdiv.innerHTML +\"\\n\"+dataDrawn\n        }\n        else {\n            mouse.startX = mouse.x;\n            mouse.startY = mouse.y;\n            element = document.createElement('div');\n            element.className = 'rectangle'\n            element.style.left = mouse.x + 'px';\n            element.style.top = mouse.y + 'px';\n            drawElement.appendChild(element)\n            drawElement.style.cursor = \"crosshair\";\n            this.StartX = mouse.x;\n            this.StartY = mouse.y - 125;\n      }\n    }\n  }\n}\n\nsaveastextfile = () =>{\n  // send to nodejs to save\n  axios.post(\"http://192.168.1.8:4000/saveastextfile/\",{\n    username : this.props.name,\n    imagename : this.state.ImageNames[this.state.index],\n    imagedata : this.outputdiv.innerHTML\n    })\n    .then(res => { // then print response status\n      console.log(res)\n    })\n    .catch(err => { // then print response status\n    console.log(err)\n    })\n}\n\nNextImage= () => {\n  // clearing out previously draw boxes and adding back the image tag\n  this.divCanvas.innerHTML = \"\";\n  this.divCanvas.appendChild(this.ImageTag);\n  if(this.state.index>this.state.ImageNames.length-2) {\n    // Do nothing\n  }\n  else {\n    this.state.index = this.state.index + 1\n    if(this.ImageTag) {\n     this.ImageTag.src = \"http://192.168.1.8:4000/img/\"+this.props.name+\"/images/\"+this.state.ImageNames[this.state.index];\n      }\n    }\n  this.outputdiv.innerHTML = \"\";\n}\n\n\nPrevImage= () => {\n  // clearing out previously draw boxes and adding back the image tag\n  this.divCanvas.innerHTML = \"\";\n  this.divCanvas.appendChild(this.ImageTag);\n  if(this.state.index == 0) {\n  }\n  else {\n  this.state.index = this.state.index - 1\n  if(this.ImageTag) {\n   this.ImageTag.src = \"http://192.168.1.8:4000/img/\"+this.props.name+\"/images/\"+this.state.ImageNames[this.state.index];\n    }\n  }\n  this.outputdiv.innerHTML = \"\";\n}\n\ntestSaveText = () =>{\n  var data = this.state.ImageNames[this.state.index]+\",\"+ this.outputdiv.innerHTML\n  axios.post(\"http://192.168.1.8:8080/saveastextfile\",data)\n    .then(res => { // then print response status\n      console.log(res)\n    })\n    .catch(err => { // then print response status\n    console.log(err)\n    })\n}\n// http://localhost:3000/upload\n\ngetmloutput = () =>{\n  var username = this.props.name\n  var imagename = this.state.ImageNames[this.state.index]\n  var url = \"http://192.168.1.8:4000/img/\"+this.props.name+\"/images/\"+this.state.ImageNames[this.state.index]\n  var mloutputurl = \"http://192.168.1.8:4000/img/\"+this.props.name+\"/images/mloutput_\"+this.props.name+\"_\"+imagename\n  var data = {'username':username,'imagename':imagename,'imageurl':url}\n\n  axios.post(\"http://localhost:8000/index/\",data)\n    .then(res => { // then print response status\n      console.log(res)\n      window.open(mloutputurl, '_blank');\n    })\n    .catch(err => { // then print response status\n    console.log(err)\n    })\n}\nApifuncgetimages = (userName) => {\n  // data is going to be the username\n  axios.post(\"http://localhost:8080/getimages\",userName)\n    .then(res => { // then print response status\n      console.log(res)\n       var ImageNames = res.data[\"data\"].split(\"</br>\");\n       ImageNames.pop();\n       this.state.ImageNames = ImageNames\n         if(this.ImageTag) {\n          this.ImageTag.src = \"http://192.168.1.8:4000/img/\"+this.props.name+\"/images/\"+this.state.ImageNames[this.state.index];\n       }\n    })\n    .catch(err => { // then print response status\n    console.log(err)\n    })\n  }\n\ndownloadfiles = () =>{\n    axios.post(\"http://localhost:4000/downloadfiles/\",{\n      username : this.props.name\n    })\n      .then(res => { // then print response status\n        console.log(res)\n        // after creating the zip file, now download\n        window.open('http://192.168.1.8:4000/img/'+this.props.name+'.zip');\n      })\n      .catch(err => {\n      // then print response status\n      console.log(err)\n      })\n}\n\nwait = (ms) =>{\nvar d = new Date();\nvar d2 = null;\ndo { d2 = new Date(); }\nwhile(d2-d < ms);\n}\n\ndownloadallfiles = () =>{\n  axios.post(\"http://localhost:4000/downloadallfiles/\",{\n    username : this.props.name\n  })\n    .then(res => { // then print response status\n      //toast.success('upload success')\n      console.log(res)\n      // after creating the zip file, now download, delay for zip file creation\n      this.wait(5000);\n      this.testall();\n    })\n    .catch(err => {\n    // then print response status\n    console.log(err)\n    })\n}\n\ntestall = () =>{\n  window.open('http://localhost:4000/img/all_'+this.props.name+'.zip');\n}\n\ncomponentDidMount(){\n    // Call GO API to get all the image names of username\n    this.Apifuncgetimages(this.props.name)\n    // setting environment variables\n    this.flag = false;\n    this.startX = 0;\n    this.EndX = 0;\n    this.StartY = 0;\n    this.EndY = 0;\n    this.imageTextData = \" \";\n}\n\nrender() {\n    return (\n      <div>\n        <div className = \"columnLeft\">\n        <p>Left Side</p>\n          <div ref = {c => this.divCanvas = c} >\n          <img className='name' ref = {c => this.ImageTag = c}/>\n          </div>\n        </div>\n        <div className = \"columnRight\">\n        <p>Right Side</p>\n          <button type=\"button\" class=\"buttonclass\" onClick={this.NextImage}>NEXT</button>\n          <button type=\"button\" class=\"buttonclass\" onClick={this.PrevImage}>PREVIOUS</button>\n          <button className=\"buttonclass\" onClick={this.onButton}>ON</button>\n          <button className=\"buttonclass\" onClick={this.offButton}>OFF</button>\n          <button className=\"buttonclass\" onClick={this.saveastextfile}>SAVE</button>\n          <button className=\"buttonclass\" onClick={this.getmloutput}>CHECK ML OUTPUT</button>\n          <button className=\"buttonclass\" onClick={this.downloadfiles}>DOWNLOAD DATA</button>\n          <button className=\"buttonclass\" onClick={this.downloadallfiles}>DOWNLOAD ALL</button>\n        </div>\n        <p hidden ref = {c =>this.outputdiv = c}>\n        </p>\n      </div>\n    );\n  }\n}\n\nexport default WorkingArea;\n"]},"metadata":{},"sourceType":"module"}