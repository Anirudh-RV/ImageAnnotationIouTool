{"ast":null,"code":"var _jsxFileName = \"/Users/anirudhrv/Desktop/Misc/InteractiveImageAnnotation/Application/ImageAnnotation/Client/src/SPA_components/WorkingArea.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport $ from 'jquery';\n\nclass WorkingArea extends Component {\n  //TODO : ADD INTRODUCTION TO PROJECT\n  constructor() {\n    super();\n\n    this.OnButton = () => {\n      this.flag = true;\n      this.initDraw(this.divCanvas, this.flag);\n    };\n\n    this.OffButton = () => {\n      this.flag = false;\n      this.initDraw(this.divCanvas, this.flag);\n    };\n\n    this.initDraw = (drawElement, flag) => {\n      function setMousePosition(e) {\n        var ev = e || window.event; //Moz || IE\n\n        if (ev.pageX) {\n          //Moz\n          mouse.x = ev.pageX;\n          mouse.y = ev.pageY;\n        } else if (ev.clientX) {\n          //IE\n          mouse.x = ev.clientX;\n          mouse.y = ev.clientY;\n        }\n      }\n\n      ;\n      var mouse = {\n        x: 0,\n        y: 0,\n        startX: 0,\n        startY: 0\n      };\n      var element = null;\n\n      drawElement.onmousemove = function (e) {\n        // draw only when flad is On\n        if (flag) {\n          setMousePosition(e);\n\n          if (element !== null) {\n            element.style.width = Math.abs(mouse.x - mouse.startX) + 'px';\n            element.style.height = Math.abs(mouse.y - mouse.startY) + 'px';\n            element.style.left = mouse.x - mouse.startX < 0 ? mouse.x + 'px' : mouse.startX + 'px';\n            element.style.top = mouse.y - mouse.startY < 0 ? mouse.y + 'px' : mouse.startY + 'px';\n          }\n        }\n      };\n\n      drawElement.onclick = function (e) {\n        console.log(\"ONorOFF : \" + flag);\n        console.log(e);\n\n        if (flag) {\n          if (element !== null) {\n            element = null;\n            drawElement.style.cursor = \"default\";\n            console.log(\"mouse: ENDX : \" + mouse.x);\n            console.log(\"mouse: ENDY : \" + mouse.y);\n            this.EndX = mouse.x;\n            this.EndY = mouse.y;\n            console.log(\"mouse: STARTX : \" + this.StartX + \"</br>mouse: startY : \" + this.StartY + \"</br>mouse: ENDX : \" + this.EndX + \"</br>mouse: ENDY : \" + this.EndY);\n            console.log(\"finsihed.\");\n          } else {\n            console.log(\"begun.\");\n            mouse.startX = mouse.x;\n            mouse.startY = mouse.y;\n            element = document.createElement('div');\n            element.className = 'rectangle';\n            element.style.left = mouse.x + 'px';\n            element.style.top = mouse.y + 'px';\n            drawElement.appendChild(element);\n            drawElement.style.cursor = \"crosshair\";\n            console.log(\"mouse: STARTX : \" + mouse.x);\n            console.log(\"mouse: startY : \" + mouse.y);\n            this.StartX = mouse.x;\n            this.StartY = mouse.y;\n          }\n        }\n      };\n    };\n\n    this.NextImage = () => {\n      this.divCanvas.innerHTML = \"\";\n      this.divCanvas.className = \"MyClass\";\n\n      if (this.state.index > this.state.ImageNames.length - 2) {\n        console.log(\"end\");\n      } else {\n        this.state.index = this.state.index + 1;\n\n        if (this.ImageTag) {\n          this.ImageTag.src = \"http://localhost:4000/img/\" + this.state.ImageNames[this.state.index];\n          console.log(this.ImageTag.width);\n          console.log(this.ImageTag.height);\n          console.log(this.ImageTag.left);\n          console.log(this.ImageTag.top);\n        }\n      }\n    };\n\n    this.PrevImage = () => {\n      if (this.state.index == 0) {\n        console.log(\"start\");\n      } else {\n        this.state.index = this.state.index - 1;\n\n        if (this.ImageTag) {\n          this.ImageTag.src = \"http://localhost:4000/img/\" + this.state.ImageNames[this.state.index];\n        }\n      }\n    };\n\n    this.Apifuncgetimages = userName => {\n      // data is going to be the username\n      axios.post(\"http://localhost:8080/getimages\", userName).then(res => {\n        // then print response status\n        console.log(\"API : \");\n        console.log(res);\n        console.log(res.data[\"data\"]);\n        var ImageNames = res.data[\"data\"].split(\"</br>\");\n        ImageNames.pop();\n        this.state.ImageNames = ImageNames;\n\n        if (this.ImageTag) {\n          this.ImageTag.src = \"http://localhost:4000/img/\" + this.state.ImageNames[this.state.index];\n        }\n      }).catch(err => {\n        // then print response status\n        console.log(\"fail\");\n        console.log(err);\n      });\n    };\n\n    this.forceUpdateHandler = () => {\n      $(\"#divCanvasId\").load(window.location.href + \" #divCanvasId\");\n    };\n\n    this.state = {\n      index: 0\n    };\n    this.forceUpdateHandler = this.forceUpdateHandler.bind(this);\n    this.baseState = this.divCanvas;\n  }\n\n  componentDidMount() {\n    // Call GO API to get all the image names of username\n    this.Apifuncgetimages(this.props.name);\n    this.flag = false;\n    this.startX = 0;\n    this.EndX = 0;\n    this.StartY = 0;\n    this.EndY = 0;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"columnLeft\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \"Left Side\"), React.createElement(\"div\", {\n      id: \"canvas\",\n      ref: c => this.divCanvas = c,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"name\",\n      ref: c => this.ImageTag = c,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    })), React.createElement(\"img\", {\n      className: \"imagePlaceHolder \",\n      src: \"http://localhost:4000/img/user1_1.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"columnRight\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"Right Side\"), React.createElement(\"button\", {\n      type: \"button\",\n      class: \"buttonclass\",\n      onClick: this.NextImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"NEXT\"), React.createElement(\"button\", {\n      type: \"button\",\n      class: \"buttonclass\",\n      onClick: this.PrevImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"PREVIOUS\"), React.createElement(\"button\", {\n      className: \"buttonclass\",\n      onClick: this.OnButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"ON\"), React.createElement(\"button\", {\n      className: \"buttonclass\",\n      onClick: this.OffButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, \"OFF\"), React.createElement(\"button\", {\n      onClick: this.forceUpdateHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"FORCE UPDATE\")));\n  }\n\n}\n\nexport default WorkingArea;","map":{"version":3,"sources":["/Users/anirudhrv/Desktop/Misc/InteractiveImageAnnotation/Application/ImageAnnotation/Client/src/SPA_components/WorkingArea.js"],"names":["React","Component","axios","$","WorkingArea","constructor","OnButton","flag","initDraw","divCanvas","OffButton","drawElement","setMousePosition","e","ev","window","event","pageX","mouse","x","y","pageY","clientX","clientY","startX","startY","element","onmousemove","style","width","Math","abs","height","left","top","onclick","console","log","cursor","EndX","EndY","StartX","StartY","document","createElement","className","appendChild","NextImage","innerHTML","state","index","ImageNames","length","ImageTag","src","PrevImage","Apifuncgetimages","userName","post","then","res","data","split","pop","catch","err","forceUpdateHandler","load","location","href","bind","baseState","componentDidMount","props","name","render","c"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,WAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,CAAP,MAAc,QAAd;;AAGA,MAAMC,WAAN,SAA0BH,SAA1B,CAAoC;AACpC;AAEAI,EAAAA,WAAW,GAAE;AACX;;AADW,SASbC,QATa,GASF,MAAM;AACf,WAAKC,IAAL,GAAY,IAAZ;AACA,WAAKC,QAAL,CAAc,KAAKC,SAAnB,EAA6B,KAAKF,IAAlC;AAED,KAbY;;AAAA,SAcbG,SAda,GAcD,MAAM;AAChB,WAAKH,IAAL,GAAW,KAAX;AACA,WAAKC,QAAL,CAAc,KAAKC,SAAnB,EAA6B,KAAKF,IAAlC;AACD,KAjBY;;AAAA,SAmBbC,QAnBa,GAmBH,CAACG,WAAD,EAAaJ,IAAb,KAAsB;AAC5B,eAASK,gBAAT,CAA0BC,CAA1B,EAA6B;AACzB,YAAIC,EAAE,GAAGD,CAAC,IAAIE,MAAM,CAACC,KAArB,CADyB,CACG;;AAC5B,YAAIF,EAAE,CAACG,KAAP,EAAc;AAAE;AACZC,UAAAA,KAAK,CAACC,CAAN,GAAUL,EAAE,CAACG,KAAb;AACAC,UAAAA,KAAK,CAACE,CAAN,GAAUN,EAAE,CAACO,KAAb;AACH,SAHD,MAGO,IAAIP,EAAE,CAACQ,OAAP,EAAgB;AAAE;AACrBJ,UAAAA,KAAK,CAACC,CAAN,GAAUL,EAAE,CAACQ,OAAb;AACAJ,UAAAA,KAAK,CAACE,CAAN,GAAUN,EAAE,CAACS,OAAb;AACH;AACJ;;AAAA;AAED,UAAIL,KAAK,GAAG;AACRC,QAAAA,CAAC,EAAE,CADK;AAERC,QAAAA,CAAC,EAAE,CAFK;AAGRI,QAAAA,MAAM,EAAE,CAHA;AAIRC,QAAAA,MAAM,EAAE;AAJA,OAAZ;AAMA,UAAIC,OAAO,GAAG,IAAd;;AAEAf,MAAAA,WAAW,CAACgB,WAAZ,GAA0B,UAAUd,CAAV,EAAa;AACrC;AACA,YAAGN,IAAH,EACA;AACEK,UAAAA,gBAAgB,CAACC,CAAD,CAAhB;;AACA,cAAIa,OAAO,KAAK,IAAhB,EAAsB;AAClBA,YAAAA,OAAO,CAACE,KAAR,CAAcC,KAAd,GAAsBC,IAAI,CAACC,GAAL,CAASb,KAAK,CAACC,CAAN,GAAUD,KAAK,CAACM,MAAzB,IAAmC,IAAzD;AACAE,YAAAA,OAAO,CAACE,KAAR,CAAcI,MAAd,GAAuBF,IAAI,CAACC,GAAL,CAASb,KAAK,CAACE,CAAN,GAAUF,KAAK,CAACO,MAAzB,IAAmC,IAA1D;AACAC,YAAAA,OAAO,CAACE,KAAR,CAAcK,IAAd,GAAsBf,KAAK,CAACC,CAAN,GAAUD,KAAK,CAACM,MAAhB,GAAyB,CAA1B,GAA+BN,KAAK,CAACC,CAAN,GAAU,IAAzC,GAAgDD,KAAK,CAACM,MAAN,GAAe,IAApF;AACAE,YAAAA,OAAO,CAACE,KAAR,CAAcM,GAAd,GAAqBhB,KAAK,CAACE,CAAN,GAAUF,KAAK,CAACO,MAAhB,GAAyB,CAA1B,GAA+BP,KAAK,CAACE,CAAN,GAAU,IAAzC,GAAgDF,KAAK,CAACO,MAAN,GAAe,IAAnF;AACH;AACF;AACF,OAZD;;AAcAd,MAAAA,WAAW,CAACwB,OAAZ,GAAsB,UAAUtB,CAAV,EAAa;AACjCuB,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAa9B,IAAzB;AACA6B,QAAAA,OAAO,CAACC,GAAR,CAAYxB,CAAZ;;AACA,YAAGN,IAAH,EACA;AACE,cAAImB,OAAO,KAAK,IAAhB,EAAsB;AAClBA,YAAAA,OAAO,GAAG,IAAV;AACAf,YAAAA,WAAW,CAACiB,KAAZ,CAAkBU,MAAlB,GAA2B,SAA3B;AACAF,YAAAA,OAAO,CAACC,GAAR,CAAY,mBAAiBnB,KAAK,CAACC,CAAnC;AACAiB,YAAAA,OAAO,CAACC,GAAR,CAAY,mBAAiBnB,KAAK,CAACE,CAAnC;AACA,iBAAKmB,IAAL,GAAYrB,KAAK,CAACC,CAAlB;AACA,iBAAKqB,IAAL,GAAYtB,KAAK,CAACE,CAAlB;AACAgB,YAAAA,OAAO,CAACC,GAAR,CAAY,qBAAmB,KAAKI,MAAxB,GAA+B,uBAA/B,GAAuD,KAAKC,MAA5D,GAAmE,qBAAnE,GAAyF,KAAKH,IAA9F,GAAmG,qBAAnG,GAAyH,KAAKC,IAA1I;AACAJ,YAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AAEH,WAVD,MAUO;AACHD,YAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAnB,YAAAA,KAAK,CAACM,MAAN,GAAeN,KAAK,CAACC,CAArB;AACAD,YAAAA,KAAK,CAACO,MAAN,GAAeP,KAAK,CAACE,CAArB;AACAM,YAAAA,OAAO,GAAGiB,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAV;AACAlB,YAAAA,OAAO,CAACmB,SAAR,GAAoB,WAApB;AACAnB,YAAAA,OAAO,CAACE,KAAR,CAAcK,IAAd,GAAqBf,KAAK,CAACC,CAAN,GAAU,IAA/B;AACAO,YAAAA,OAAO,CAACE,KAAR,CAAcM,GAAd,GAAoBhB,KAAK,CAACE,CAAN,GAAU,IAA9B;AACAT,YAAAA,WAAW,CAACmC,WAAZ,CAAwBpB,OAAxB;AACAf,YAAAA,WAAW,CAACiB,KAAZ,CAAkBU,MAAlB,GAA2B,WAA3B;AACAF,YAAAA,OAAO,CAACC,GAAR,CAAY,qBAAmBnB,KAAK,CAACC,CAArC;AACAiB,YAAAA,OAAO,CAACC,GAAR,CAAY,qBAAmBnB,KAAK,CAACE,CAArC;AACA,iBAAKqB,MAAL,GAAcvB,KAAK,CAACC,CAApB;AACA,iBAAKuB,MAAL,GAAcxB,KAAK,CAACE,CAApB;AACH;AACJ;AACF,OA/BC;AAgCH,KArFY;;AAAA,SAuFb2B,SAvFa,GAuFF,MAAM;AACf,WAAKtC,SAAL,CAAeuC,SAAf,GAA2B,EAA3B;AACA,WAAKvC,SAAL,CAAeoC,SAAf,GAA2B,SAA3B;;AACA,UAAG,KAAKI,KAAL,CAAWC,KAAX,GAAiB,KAAKD,KAAL,CAAWE,UAAX,CAAsBC,MAAtB,GAA6B,CAAjD,EACA;AACEhB,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACD,OAHD,MAIK;AACL,aAAKY,KAAL,CAAWC,KAAX,GAAmB,KAAKD,KAAL,CAAWC,KAAX,GAAmB,CAAtC;;AACA,YAAG,KAAKG,QAAR,EAAkB;AACjB,eAAKA,QAAL,CAAcC,GAAd,GAAoB,+BAA6B,KAAKL,KAAL,CAAWE,UAAX,CAAsB,KAAKF,KAAL,CAAWC,KAAjC,CAAjD;AACAd,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKgB,QAAL,CAAcxB,KAA1B;AACAO,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKgB,QAAL,CAAcrB,MAA1B;AACAI,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKgB,QAAL,CAAcpB,IAA1B;AACAG,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKgB,QAAL,CAAcnB,GAA1B;AACE;AACF;AACF,KAxGY;;AAAA,SA2GbqB,SA3Ga,GA2GF,MAAM;AACf,UAAG,KAAKN,KAAL,CAAWC,KAAX,IAAoB,CAAvB,EACA;AACEd,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACD,OAHD,MAIK;AACL,aAAKY,KAAL,CAAWC,KAAX,GAAmB,KAAKD,KAAL,CAAWC,KAAX,GAAmB,CAAtC;;AACA,YAAG,KAAKG,QAAR,EAAkB;AACjB,eAAKA,QAAL,CAAcC,GAAd,GAAoB,+BAA6B,KAAKL,KAAL,CAAWE,UAAX,CAAsB,KAAKF,KAAL,CAAWC,KAAjC,CAAjD;AACE;AACF;AACF,KAtHY;;AAAA,SAyHbM,gBAzHa,GAyHOC,QAAD,IAAc;AAC/B;AACAvD,MAAAA,KAAK,CAACwD,IAAN,CAAW,iCAAX,EAA6CD,QAA7C,EACGE,IADH,CACQC,GAAG,IAAI;AAAE;AACbxB,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYuB,GAAZ;AACAxB,QAAAA,OAAO,CAACC,GAAR,CAAYuB,GAAG,CAACC,IAAJ,CAAS,MAAT,CAAZ;AACC,YAAIV,UAAU,GAAGS,GAAG,CAACC,IAAJ,CAAS,MAAT,EAAiBC,KAAjB,CAAuB,OAAvB,CAAjB;AACAX,QAAAA,UAAU,CAACY,GAAX;AACA,aAAKd,KAAL,CAAWE,UAAX,GAAwBA,UAAxB;;AACE,YAAG,KAAKE,QAAR,EAAkB;AACjB,eAAKA,QAAL,CAAcC,GAAd,GAAoB,+BAA6B,KAAKL,KAAL,CAAWE,UAAX,CAAsB,KAAKF,KAAL,CAAWC,KAAjC,CAAjD;AACF;AACH,OAXH,EAYGc,KAZH,CAYSC,GAAG,IAAI;AAAE;AAChB7B,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY4B,GAAZ;AACC,OAfH;AAgBC,KA3IU;;AAAA,SAuJbC,kBAvJa,GAuJO,MAAM;AAExB/D,MAAAA,CAAC,CAAE,cAAF,CAAD,CAAoBgE,IAApB,CAAyBpD,MAAM,CAACqD,QAAP,CAAgBC,IAAhB,GAAuB,eAAhD;AACC,KA1JU;;AAEX,SAAKpB,KAAL,GAAY;AACVC,MAAAA,KAAK,EAAC;AADI,KAAZ;AAGA,SAAKgB,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBI,IAAxB,CAA6B,IAA7B,CAA1B;AACA,SAAKC,SAAL,GAAiB,KAAK9D,SAAtB;AACD;;AAsID+D,EAAAA,iBAAiB,GAAE;AACf;AACA,SAAKhB,gBAAL,CAAsB,KAAKiB,KAAL,CAAWC,IAAjC;AACA,SAAKnE,IAAL,GAAY,KAAZ;AACA,SAAKiB,MAAL,GAAc,CAAd;AACA,SAAKe,IAAL,GAAY,CAAZ;AACA,SAAKG,MAAL,GAAc,CAAd;AACA,SAAKF,IAAL,GAAY,CAAZ;AACH;;AAQCmC,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAG,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADA,EAEE;AAAK,MAAA,EAAE,EAAC,QAAR;AAAiB,MAAA,GAAG,EAAIC,CAAC,IAAI,KAAKnE,SAAL,GAAiBmE,CAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAK,MAAA,SAAS,EAAC,MAAf;AAAsB,MAAA,GAAG,EAAIA,CAAC,IAAI,KAAKvB,QAAL,GAAgBuB,CAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,CAFF,EAKE;AAAK,MAAA,SAAS,EAAC,mBAAf;AACE,MAAA,GAAG,EAAC,uCADN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,CADF,EAUE;AAAK,MAAA,SAAS,EAAG,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADA,EAEE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,KAAK,EAAC,aAA5B;AAA0C,MAAA,OAAO,EAAE,KAAK7B,SAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,EAGE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,KAAK,EAAC,aAA5B;AAA0C,MAAA,OAAO,EAAE,KAAKQ,SAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF,EAIE;AAAQ,MAAA,SAAS,EAAC,aAAlB;AAAgC,MAAA,OAAO,EAAE,KAAKjD,QAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJF,EAKE;AAAQ,MAAA,SAAS,EAAC,aAAlB;AAAgC,MAAA,OAAO,EAAE,KAAKI,SAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aALF,EAME;AAAQ,MAAA,OAAO,EAAG,KAAKwD,kBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBANF,CAVF,CADF;AAsBD;;AAvLiC;;AAyLpC,eAAe9D,WAAf","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport $ from 'jquery';\n\n\nclass WorkingArea extends Component {\n//TODO : ADD INTRODUCTION TO PROJECT\n\nconstructor(){\n  super();\n  this.state= {\n    index:0,\n  }\n  this.forceUpdateHandler = this.forceUpdateHandler.bind(this);\n  this.baseState = this.divCanvas;\n}\n\nOnButton = () => {\n  this.flag = true;\n  this.initDraw(this.divCanvas,this.flag,);\n\n}\nOffButton = () => {\n  this.flag= false;\n  this.initDraw(this.divCanvas,this.flag);\n}\n\ninitDraw= (drawElement,flag) => {\n    function setMousePosition(e) {\n        var ev = e || window.event; //Moz || IE\n        if (ev.pageX) { //Moz\n            mouse.x = ev.pageX;\n            mouse.y = ev.pageY;\n        } else if (ev.clientX) { //IE\n            mouse.x = ev.clientX ;\n            mouse.y = ev.clientY ;\n        }\n    };\n\n    var mouse = {\n        x: 0,\n        y: 0,\n        startX: 0,\n        startY: 0\n    };\n    var element = null;\n\n    drawElement.onmousemove = function (e) {\n      // draw only when flad is On\n      if(flag)\n      {\n        setMousePosition(e);\n        if (element !== null) {\n            element.style.width = Math.abs(mouse.x - mouse.startX) + 'px';\n            element.style.height = Math.abs(mouse.y - mouse.startY) + 'px';\n            element.style.left = (mouse.x - mouse.startX < 0) ? mouse.x + 'px' : mouse.startX + 'px';\n            element.style.top = (mouse.y - mouse.startY < 0) ? mouse.y + 'px' : mouse.startY + 'px';\n        }\n      }\n    }\n\n    drawElement.onclick = function (e) {\n      console.log(\"ONorOFF : \"+flag);\n      console.log(e);\n      if(flag)\n      {\n        if (element !== null) {\n            element = null;\n            drawElement.style.cursor = \"default\";\n            console.log(\"mouse: ENDX : \"+mouse.x)\n            console.log(\"mouse: ENDY : \"+mouse.y)\n            this.EndX = mouse.x;\n            this.EndY = mouse.y;\n            console.log(\"mouse: STARTX : \"+this.StartX+\"</br>mouse: startY : \"+this.StartY+\"</br>mouse: ENDX : \"+this.EndX+\"</br>mouse: ENDY : \"+this.EndY);\n            console.log(\"finsihed.\");\n\n        } else {\n            console.log(\"begun.\");\n            mouse.startX = mouse.x;\n            mouse.startY = mouse.y;\n            element = document.createElement('div');\n            element.className = 'rectangle'\n            element.style.left = mouse.x + 'px';\n            element.style.top = mouse.y + 'px';\n            drawElement.appendChild(element)\n            drawElement.style.cursor = \"crosshair\";\n            console.log(\"mouse: STARTX : \"+mouse.x)\n            console.log(\"mouse: startY : \"+mouse.y)\n            this.StartX = mouse.x;\n            this.StartY = mouse.y;\n        }\n    }\n  }\n}\n\nNextImage= () => {\n  this.divCanvas.innerHTML = \"\";\n  this.divCanvas.className = \"MyClass\";\n  if(this.state.index>this.state.ImageNames.length-2)\n  {\n    console.log(\"end\")\n  }\n  else {\n  this.state.index = this.state.index + 1\n  if(this.ImageTag) {\n   this.ImageTag.src = \"http://localhost:4000/img/\"+this.state.ImageNames[this.state.index];\n   console.log(this.ImageTag.width)\n   console.log(this.ImageTag.height)\n   console.log(this.ImageTag.left)\n   console.log(this.ImageTag.top)\n    }\n  }\n}\n\n\nPrevImage= () => {\n  if(this.state.index == 0)\n  {\n    console.log(\"start\")\n  }\n  else {\n  this.state.index = this.state.index - 1\n  if(this.ImageTag) {\n   this.ImageTag.src = \"http://localhost:4000/img/\"+this.state.ImageNames[this.state.index];\n    }\n  }\n}\n\n\nApifuncgetimages = (userName) => {\n  // data is going to be the username\n  axios.post(\"http://localhost:8080/getimages\",userName)\n    .then(res => { // then print response status\n      console.log(\"API : \")\n      console.log(res)\n      console.log(res.data[\"data\"])\n       var ImageNames = res.data[\"data\"].split(\"</br>\");\n       ImageNames.pop();\n       this.state.ImageNames = ImageNames\n         if(this.ImageTag) {\n          this.ImageTag.src = \"http://localhost:4000/img/\"+this.state.ImageNames[this.state.index];\n       }\n    })\n    .catch(err => { // then print response status\n    console.log(\"fail\")\n    console.log(err)\n    })\n  }\n\ncomponentDidMount(){\n    // Call GO API to get all the image names of username\n    this.Apifuncgetimages(this.props.name)\n    this.flag = false;\n    this.startX = 0;\n    this.EndX = 0;\n    this.StartY = 0;\n    this.EndY = 0;\n}\n\nforceUpdateHandler= () => {\n\n  $( \"#divCanvasId\" ).load(window.location.href + \" #divCanvasId\" );\n  };\n\n\n  render() {\n    return (\n      <div>\n        <div className = \"columnLeft\">\n        <p>Left Side</p>\n          <div id=\"canvas\" ref = {c => this.divCanvas = c} >\n          <img className='name' ref = {c => this.ImageTag = c}/>\n          </div>\n          <img className='imagePlaceHolder\n          ' src=\"http://localhost:4000/img/user1_1.png\"/>\n\n        </div>\n        <div className = \"columnRight\">\n        <p>Right Side</p>\n          <button type=\"button\" class=\"buttonclass\" onClick={this.NextImage}>NEXT</button>\n          <button type=\"button\" class=\"buttonclass\" onClick={this.PrevImage}>PREVIOUS</button>\n          <button className=\"buttonclass\" onClick={this.OnButton}>ON</button>\n          <button className=\"buttonclass\" onClick={this.OffButton}>OFF</button>\n          <button onClick= {this.forceUpdateHandler} >FORCE UPDATE</button>\n\n        </div>\n      </div>\n    );\n  }\n}\nexport default WorkingArea;\n"]},"metadata":{},"sourceType":"module"}