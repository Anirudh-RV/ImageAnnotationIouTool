{"ast":null,"code":"import _classCallCheck from\"/Users/anirudhrv/Desktop/Misc/InteractiveImageAnnotation/Application/ImageAnnotation/Client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/anirudhrv/Desktop/Misc/InteractiveImageAnnotation/Application/ImageAnnotation/Client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/anirudhrv/Desktop/Misc/InteractiveImageAnnotation/Application/ImageAnnotation/Client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/anirudhrv/Desktop/Misc/InteractiveImageAnnotation/Application/ImageAnnotation/Client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/anirudhrv/Desktop/Misc/InteractiveImageAnnotation/Application/ImageAnnotation/Client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import'./App.css';import axios from'axios';import $ from'jquery';var WorkingArea=/*#__PURE__*/function(_Component){_inherits(WorkingArea,_Component);//TODO : ADD INTRODUCTION TO PROJECT\nfunction WorkingArea(){var _this;_classCallCheck(this,WorkingArea);_this=_possibleConstructorReturn(this,_getPrototypeOf(WorkingArea).call(this));_this.onButton=function(){_this.flag=true;_this.initDraw(_this.divCanvas,_this.flag,_this.outputdiv);};_this.offButton=function(){_this.flag=false;_this.initDraw(_this.divCanvas,_this.flag,_this.outputdiv);};_this.initDraw=function(drawElement,flag,outputdiv){function setMousePosition(e){var ev=e||window.event;//Moz || IE\nif(ev.pageX){//Moz\nmouse.x=ev.pageX;mouse.y=ev.pageY;}else if(ev.clientX){//IE\nmouse.x=ev.clientX;mouse.y=ev.clientY;}};var mouse={x:0,y:0,startX:0,startY:0};var element=null;drawElement.onmousemove=function(e){// draw only when flad is On\nif(flag){setMousePosition(e);if(element!==null){element.style.width=Math.abs(mouse.x-mouse.startX)+'px';element.style.height=Math.abs(mouse.y-mouse.startY)+'px';element.style.left=mouse.x-mouse.startX<0?mouse.x+'px':mouse.startX+'px';element.style.top=mouse.y-mouse.startY<0?mouse.y+'px':mouse.startY+'px';}}};drawElement.onclick=function(e){console.log(\"ONorOFF : \"+flag);console.log(e);if(flag){if(element!==null){element=null;drawElement.style.cursor=\"default\";console.log(\"mouse: ENDX : \"+mouse.x);console.log(\"mouse: ENDY : \"+mouse.y);this.EndX=mouse.x;this.EndY=mouse.y-125;var dataDrawn=\"(\"+this.StartX+\"|\"+this.StartY+\") (\"+this.EndX+\"|\"+this.EndY+\")</br>\";this.imageTextData=dataDrawn;outputdiv.innerHTML=outputdiv.innerHTML+\"\\n\"+dataDrawn;console.log(\"displaying here : \"+this.imageTextData);console.log(\"finsihed.\");}else{console.log(\"begun.\");mouse.startX=mouse.x;mouse.startY=mouse.y;element=document.createElement('div');element.className='rectangle';element.style.left=mouse.x+'px';element.style.top=mouse.y+'px';drawElement.appendChild(element);drawElement.style.cursor=\"crosshair\";console.log(\"mouse: STARTX : \"+mouse.x);console.log(\"mouse: startY : \"+mouse.y);this.StartX=mouse.x;this.StartY=mouse.y-125;}}};};_this.NextImage=function(){// clearing out previously draw boxes and adding back the image tag\n_this.divCanvas.innerHTML=\"\";_this.divCanvas.appendChild(_this.ImageTag);if(_this.state.index>_this.state.ImageNames.length-2){console.log(\"end\");}else{// save the rectangles created and output text file (.txt) for the image\nvar data=\"output_\"+_this.state.ImageNames[_this.state.index]+\",\"+_this.outputdiv.innerHTML;console.log(data);axios.post(\"http://192.168.1.8:8080/saveastextfile\",data).then(function(res){// then print response status\nconsole.log(\"API : \");console.log(res);console.log(res.data[\"message\"]);}).catch(function(err){// then print response status\nconsole.log(\"FAIL\");console.log(err);});_this.state.index=_this.state.index+1;if(_this.ImageTag){_this.ImageTag.src=\"http://localhost:4000/img/\"+_this.state.ImageNames[_this.state.index];console.log(_this.ImageTag.width);console.log(_this.ImageTag.height);console.log(_this.ImageTag.left);console.log(_this.ImageTag.top);}}_this.outputdiv.innerHTML=\"\";};_this.PrevImage=function(){// clearing out previously draw boxes and adding back the image tag\n_this.divCanvas.innerHTML=\"\";_this.divCanvas.appendChild(_this.ImageTag);if(_this.state.index==0){console.log(\"start\");}else{_this.state.index=_this.state.index-1;if(_this.ImageTag){_this.ImageTag.src=\"http://localhost:4000/img/\"+_this.state.ImageNames[_this.state.index];}}_this.outputdiv.innerHTML=\"\";};_this.testSaveText=function(){var data=_this.state.ImageNames[_this.state.index]+\",\"+_this.outputdiv.innerHTML;console.log(data);axios.post(\"http://192.168.1.8:8080/saveastextfile\",data).then(function(res){// then print response status\nconsole.log(\"API : \");console.log(res);console.log(res.data[\"message\"]);}).catch(function(err){// then print response status\nconsole.log(\"FAIL\");console.log(err);});};_this.Apifuncgetimages=function(userName){// data is going to be the username\nconsole.log(\"Calling GO API at 8080 : \");axios.post(\"http://192.168.1.8:8080/getimages\",userName).then(function(res){// then print response status\nconsole.log(\"API : \");console.log(res);console.log(res.data[\"data\"]);var ImageNames=res.data[\"data\"].split(\"</br>\");ImageNames.pop();_this.state.ImageNames=ImageNames;if(_this.ImageTag){_this.ImageTag.src=\"http://localhost:4000/img/\"+_this.state.ImageNames[_this.state.index];}}).catch(function(err){// then print response status\nconsole.log(\"FAIL\");console.log(err);});};_this.state={index:0};return _this;}_createClass(WorkingArea,[{key:\"componentDidMount\",value:function componentDidMount(){// Call GO API to get all the image names of username\nthis.Apifuncgetimages(this.props.name);// setting environment variables\nthis.flag=false;this.startX=0;this.EndX=0;this.StartY=0;this.EndY=0;this.imageTextData=\" \";}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",null,React.createElement(\"div\",{className:\"columnLeft\"},React.createElement(\"p\",null,\"Left Side\"),React.createElement(\"div\",{ref:function ref(c){return _this2.divCanvas=c;}},React.createElement(\"img\",{className:\"name\",ref:function ref(c){return _this2.ImageTag=c;}}))),React.createElement(\"div\",{className:\"columnRight\"},React.createElement(\"p\",null,\"Right Side\"),React.createElement(\"button\",{type:\"button\",class:\"buttonclass\",onClick:this.NextImage},\"NEXT\"),React.createElement(\"button\",{type:\"button\",class:\"buttonclass\",onClick:this.PrevImage},\"PREVIOUS\"),React.createElement(\"button\",{className:\"buttonclass\",onClick:this.onButton},\"ON\"),React.createElement(\"button\",{className:\"buttonclass\",onClick:this.offButton},\"OFF\"),React.createElement(\"button\",{className:\"buttonclass\",onClick:this.testSaveText},\"SEND SOMETHING (TEST)\")),React.createElement(\"div\",{ref:function ref(c){return _this2.outputdiv=c;}}));}}]);return WorkingArea;}(Component);export default WorkingArea;","map":{"version":3,"sources":["/Users/anirudhrv/Desktop/Misc/InteractiveImageAnnotation/Application/ImageAnnotation/Client/src/SPA_components/WorkingArea.js"],"names":["React","Component","axios","$","WorkingArea","onButton","flag","initDraw","divCanvas","outputdiv","offButton","drawElement","setMousePosition","e","ev","window","event","pageX","mouse","x","y","pageY","clientX","clientY","startX","startY","element","onmousemove","style","width","Math","abs","height","left","top","onclick","console","log","cursor","EndX","EndY","dataDrawn","StartX","StartY","imageTextData","innerHTML","document","createElement","className","appendChild","NextImage","ImageTag","state","index","ImageNames","length","data","post","then","res","catch","err","src","PrevImage","testSaveText","Apifuncgetimages","userName","split","pop","props","name","c"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport $ from 'jquery';\n\n\nclass WorkingArea extends Component {\n//TODO : ADD INTRODUCTION TO PROJECT\n\nconstructor(){\n  super();\n  this.state= {\n    index:0,\n  }\n}\n\nonButton = () => {\n  this.flag = true;\n  this.initDraw(this.divCanvas,this.flag,this.outputdiv);\n\n}\noffButton = () => {\n  this.flag= false;\n  this.initDraw(this.divCanvas,this.flag,this.outputdiv );\n}\n\ninitDraw= (drawElement,flag,outputdiv) => {\n    function setMousePosition(e) {\n        var ev = e || window.event; //Moz || IE\n        if (ev.pageX) { //Moz\n            mouse.x = ev.pageX;\n            mouse.y = ev.pageY;\n        }\n        else if (ev.clientX) { //IE\n            mouse.x = ev.clientX ;\n            mouse.y = ev.clientY ;\n        }\n    };\n\n    var mouse = {\n        x: 0,\n        y: 0,\n        startX: 0,\n        startY: 0\n    };\n    var element = null;\n\n    drawElement.onmousemove = function (e) {\n      // draw only when flad is On\n      if(flag) {\n        setMousePosition(e);\n        if (element !== null) {\n            element.style.width = Math.abs(mouse.x - mouse.startX) + 'px';\n            element.style.height = Math.abs(mouse.y - mouse.startY) + 'px';\n            element.style.left = (mouse.x - mouse.startX < 0) ? mouse.x + 'px' : mouse.startX + 'px';\n            element.style.top = (mouse.y - mouse.startY < 0) ? mouse.y + 'px' : mouse.startY + 'px';\n        }\n      }\n    }\n\n    drawElement.onclick = function (e) {\n      console.log(\"ONorOFF : \"+flag);\n      console.log(e);\n      if(flag) {\n        if (element !== null) {\n            element = null;\n            drawElement.style.cursor = \"default\";\n            console.log(\"mouse: ENDX : \"+mouse.x)\n            console.log(\"mouse: ENDY : \"+mouse.y)\n            this.EndX = mouse.x;\n            this.EndY = mouse.y - 125;\n            var dataDrawn = \"(\"+this.StartX+\"|\"+this.StartY+\") (\"+this.EndX+\"|\"+this.EndY+\")</br>\"\n            this.imageTextData = dataDrawn\n            outputdiv.innerHTML = outputdiv.innerHTML +\"\\n\"+dataDrawn\n            console.log(\"displaying here : \"+this.imageTextData)\n            console.log(\"finsihed.\");\n\n        }\n        else {\n            console.log(\"begun.\");\n            mouse.startX = mouse.x;\n            mouse.startY = mouse.y;\n            element = document.createElement('div');\n            element.className = 'rectangle'\n            element.style.left = mouse.x + 'px';\n            element.style.top = mouse.y + 'px';\n            drawElement.appendChild(element)\n            drawElement.style.cursor = \"crosshair\";\n            console.log(\"mouse: STARTX : \"+mouse.x)\n            console.log(\"mouse: startY : \"+mouse.y)\n            this.StartX = mouse.x;\n            this.StartY = mouse.y - 125;\n        }\n    }\n  }\n}\n\nNextImage= () => {\n  // clearing out previously draw boxes and adding back the image tag\n  this.divCanvas.innerHTML = \"\";\n  this.divCanvas.appendChild(this.ImageTag);\n\n  if(this.state.index>this.state.ImageNames.length-2) {\n    console.log(\"end\")\n  }\n  else {\n  // save the rectangles created and output text file (.txt) for the image\n  var data = \"output_\"+this.state.ImageNames[this.state.index]+\",\"+ this.outputdiv.innerHTML\n  console.log(data)\n  axios.post(\"http://192.168.1.8:8080/saveastextfile\",data)\n    .then(res => { // then print response status\n      console.log(\"API : \")\n      console.log(res)\n      console.log(res.data[\"message\"])\n    })\n    .catch(err => { // then print response status\n    console.log(\"FAIL\")\n    console.log(err)\n    })\n\n  this.state.index = this.state.index + 1\n  if(this.ImageTag) {\n   this.ImageTag.src = \"http://localhost:4000/img/\"+this.state.ImageNames[this.state.index];\n   console.log(this.ImageTag.width)\n   console.log(this.ImageTag.height)\n   console.log(this.ImageTag.left)\n   console.log(this.ImageTag.top)\n    }\n  }\n\n  this.outputdiv.innerHTML = \"\";\n}\n\n\nPrevImage= () => {\n  // clearing out previously draw boxes and adding back the image tag\n  this.divCanvas.innerHTML = \"\";\n  this.divCanvas.appendChild(this.ImageTag);\n  if(this.state.index == 0) {\n    console.log(\"start\")\n  }\n  else {\n  this.state.index = this.state.index - 1\n  if(this.ImageTag) {\n   this.ImageTag.src = \"http://localhost:4000/img/\"+this.state.ImageNames[this.state.index];\n    }\n  }\n  this.outputdiv.innerHTML = \"\";\n\n}\n\ntestSaveText = () =>{\n  var data = this.state.ImageNames[this.state.index]+\",\"+ this.outputdiv.innerHTML\n  console.log(data)\n  axios.post(\"http://192.168.1.8:8080/saveastextfile\",data)\n    .then(res => { // then print response status\n      console.log(\"API : \")\n      console.log(res)\n      console.log(res.data[\"message\"])\n    })\n    .catch(err => { // then print response status\n    console.log(\"FAIL\")\n    console.log(err)\n    })\n\n}\n\nApifuncgetimages = (userName) => {\n  // data is going to be the username\n  console.log(\"Calling GO API at 8080 : \")\n  axios.post(\"http://192.168.1.8:8080/getimages\",userName)\n    .then(res => { // then print response status\n      console.log(\"API : \")\n      console.log(res)\n      console.log(res.data[\"data\"])\n       var ImageNames = res.data[\"data\"].split(\"</br>\");\n       ImageNames.pop();\n       this.state.ImageNames = ImageNames\n         if(this.ImageTag) {\n          this.ImageTag.src = \"http://localhost:4000/img/\"+this.state.ImageNames[this.state.index];\n       }\n    })\n    .catch(err => { // then print response status\n    console.log(\"FAIL\")\n    console.log(err)\n    })\n  }\n\ncomponentDidMount(){\n    // Call GO API to get all the image names of username\n    this.Apifuncgetimages(this.props.name)\n\n    // setting environment variables\n    this.flag = false;\n    this.startX = 0;\n    this.EndX = 0;\n    this.StartY = 0;\n    this.EndY = 0;\n    this.imageTextData = \" \";\n}\n\nrender() {\n    return (\n      <div>\n        <div className = \"columnLeft\">\n        <p>Left Side</p>\n          <div ref = {c => this.divCanvas = c} >\n          <img className='name' ref = {c => this.ImageTag = c}/>\n          </div>\n        </div>\n        <div className = \"columnRight\">\n        <p>Right Side</p>\n          <button type=\"button\" class=\"buttonclass\" onClick={this.NextImage}>NEXT</button>\n          <button type=\"button\" class=\"buttonclass\" onClick={this.PrevImage}>PREVIOUS</button>\n          <button className=\"buttonclass\" onClick={this.onButton}>ON</button>\n          <button className=\"buttonclass\" onClick={this.offButton}>OFF</button>\n          <button className=\"buttonclass\" onClick={this.testSaveText}>SEND SOMETHING (TEST)</button>\n        </div>\n        <div ref = {c =>this.outputdiv = c}>\n        </div>\n      </div>\n    );\n  }\n}\nexport default WorkingArea;\n"]},"metadata":{},"sourceType":"module"}