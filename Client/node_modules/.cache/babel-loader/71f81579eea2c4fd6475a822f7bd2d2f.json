{"ast":null,"code":"import _classCallCheck from\"/Users/anirudhrv/Desktop/Misc/InteractiveImageAnnotation/Application/ImageAnnotation/Client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/anirudhrv/Desktop/Misc/InteractiveImageAnnotation/Application/ImageAnnotation/Client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/anirudhrv/Desktop/Misc/InteractiveImageAnnotation/Application/ImageAnnotation/Client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/anirudhrv/Desktop/Misc/InteractiveImageAnnotation/Application/ImageAnnotation/Client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/anirudhrv/Desktop/Misc/InteractiveImageAnnotation/Application/ImageAnnotation/Client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import axios from'axios';import{Progress}from'reactstrap';import{BrowserRouter,Route,Switch,Redirect}from'react-router-dom';import Cookies from'universal-cookie';import Home from'./Home';var UploadMultipleFiles=/*#__PURE__*/function(_Component){_inherits(UploadMultipleFiles,_Component);function UploadMultipleFiles(props){var _this;_classCallCheck(this,UploadMultipleFiles);_this=_possibleConstructorReturn(this,_getPrototypeOf(UploadMultipleFiles).call(this,props));_this.Logout=function(){console.log(\"inside LOGOUT\");var cookies=new Cookies();cookies.remove('username');window.location.reload(false);};_this.checkMimeType=function(event){//getting file object\nvar files=event.target.files;//define message container\nvar err=[];// list allow mime type\nvar types=['image/png','image/jpeg','image/gif'];// loop access array\nfor(var x=0;x<files.length;x++){// compare file type find doesn't matach\nif(types.every(function(type){return files[x].type!==type;})){// create error message and assign to container\nerr[x]=files[x].type+' is not a supported format\\n';}};for(var z=0;z<err.length;z++){// if message not same old that mean has error\n// discard selected file\nevent.target.value=null;}return true;};_this.maxSelectFile=function(event){var files=event.target.files;if(files.length>10){var msg='Only 10 images can be uploaded at a time';event.target.value=null;return false;}return true;};_this.checkFileSize=function(event){var files=event.target.files;var size=2000000;var err=[];for(var x=0;x<files.length;x++){if(files[x].size>size){err[x]=files[x].type+'is too large, please pick a smaller file\\n';}};for(var z=0;z<err.length;z++){// if message not same old that mean has error\n// discard selected file\nevent.target.value=null;}return true;};_this.addToBackendUsingApi=function(files){var userName=_this.props.location.state.userName;var fileNames=userName+\",\";for(var x=0;x<files.length-1;x++){fileNames=fileNames+files[x].name+\",\";}fileNames=fileNames+files[files.length-1].name;// api call\nconsole.log(\"Calling GO API at 8080 : \");console.log(fileNames);axios.post(\"http:192.168.1.8:8080/insertimagedata\",fileNames).then(function(res){// then print response status\n//toast.success('upload success')\nconsole.log(\"API message : \");console.log(res);}).catch(function(err){// then print response status\n//  toast.error('upload fail')\nconsole.log(err);});};_this.onChangeHandler=function(event){var files=event.target.files;if(_this.maxSelectFile(event)&&_this.checkMimeType(event)&&_this.checkFileSize(event)){// if return true allow to setState\n_this.setState({selectedFile:files,loaded:0});}};_this.RedirecToEditPage=function(){var userName=_this.props.location.state.userName;_this.props.history.push({pathname:'/EditPage',state:{userName:_this.props.location.state.userName}});};_this.onClickHandler=function(){var data=new FormData();// getting username from input\nvar userName=_this.props.location.state.userName;// filling FormData with selectedFiles(Array of objects)\nfor(var x=0;x<_this.state.selectedFile.length;x++){data.append('file',_this.state.selectedFile[x]);}// header carries information of username to backend with data\naxios.post(\"http://192.168.1.8:4000/upload\",data,{headers:{userName:userName},onUploadProgress:function onUploadProgress(ProgressEvent){_this.setState({loaded:ProgressEvent.loaded/ProgressEvent.total*100});}}).then(function(res){// then print response status\n//toast.success('upload success')\n_this.addToBackendUsingApi(_this.state.selectedFile);console.log(\"Upload success:\\n\"+res);// redirect to WorkingArea.js for viewing images\n}).catch(function(err){// then print response status\n//  toast.error('upload fail')\nconsole.log(\"Upload fail\"+err);});};_this.state={selectedFile:null,loaded:0};return _this;}_createClass(UploadMultipleFiles,[{key:\"componentDidMount\",value:function componentDidMount(){// set UserName\nconsole.log(this.props.location.state.userName);}},{key:\"render\",value:function render(){return React.createElement(\"div\",{class:\"container\"},React.createElement(\"div\",{class:\"row\"},React.createElement(\"div\",{class:\"offset-md-3 col-md-6\"},React.createElement(\"div\",{class:\"form-group files\"},React.createElement(\"label\",null,\"Upload Your File \"),React.createElement(\"input\",{id:\"input_upload\",type:\"file\",class:\"form-control\",multiple:true,onChange:this.onChangeHandler})),React.createElement(\"div\",{class:\"form-group\"},React.createElement(Progress,{max:\"100\",color:\"success\",value:this.state.loaded},Math.round(this.state.loaded,2),\"%\")),React.createElement(\"button\",{type:\"button\",class:\"buttonclass\",onClick:this.onClickHandler},\"Upload\"),React.createElement(\"button\",{type:\"button\",class:\"buttonclass\",onClick:this.RedirecToEditPage},\"View Images\"),React.createElement(\"button\",{type:\"button\",class:\"buttonclass\",onClick:this.Logout},\"Log out\"))));}}]);return UploadMultipleFiles;}(Component);export default UploadMultipleFiles;","map":{"version":3,"sources":["/Users/anirudhrv/Desktop/Misc/InteractiveImageAnnotation/Application/ImageAnnotation/Client/src/SPA_components/UploadMultipleFiles.js"],"names":["React","Component","axios","Progress","BrowserRouter","Route","Switch","Redirect","Cookies","Home","UploadMultipleFiles","props","Logout","console","log","cookies","remove","window","location","reload","checkMimeType","event","files","target","err","types","x","length","every","type","z","value","maxSelectFile","msg","checkFileSize","size","addToBackendUsingApi","userName","state","fileNames","name","post","then","res","catch","onChangeHandler","setState","selectedFile","loaded","RedirecToEditPage","history","push","pathname","onClickHandler","data","FormData","append","headers","onUploadProgress","ProgressEvent","total","Math","round"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport {Progress} from 'reactstrap';\nimport { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom';\nimport Cookies from 'universal-cookie';\nimport Home from './Home';\n\nclass UploadMultipleFiles extends Component {\n  constructor(props) {\n    super(props);\n      this.state = {\n        selectedFile: null,\n        loaded:0\n      }\n\n  }\n\nLogout = () =>{\n    console.log(\"inside LOGOUT\")\n    const cookies = new Cookies()\n    cookies.remove('username');\n    window.location.reload(false);\n}\n  checkMimeType=(event)=>{\n    //getting file object\n    let files = event.target.files\n    //define message container\n    let err = []\n    // list allow mime type\n   const types = ['image/png', 'image/jpeg', 'image/gif']\n    // loop access array\n    for(var x = 0; x<files.length; x++) {\n     // compare file type find doesn't matach\n         if (types.every(type => files[x].type !== type)) {\n         // create error message and assign to container\n         err[x] = files[x].type+' is not a supported format\\n';\n       }\n     };\n     for(var z = 0; z<err.length; z++) {// if message not same old that mean has error\n         // discard selected file\n        event.target.value = null\n    }\n   return true;\n  }\n  maxSelectFile=(event)=>{\n    let files = event.target.files\n        if (files.length > 10) {\n           const msg = 'Only 10 images can be uploaded at a time'\n           event.target.value = null\n           return false;\n      }\n    return true;\n }\n checkFileSize=(event)=>{\n  let files = event.target.files\n  let size = 2000000\n  let err = [];\n  for(var x = 0; x<files.length; x++) {\n  if (files[x].size > size) {\n   err[x] = files[x].type+'is too large, please pick a smaller file\\n';\n }\n};\nfor(var z = 0; z<err.length; z++) {// if message not same old that mean has error\n  // discard selected file\n event.target.value = null\n}\nreturn true;\n}\n\n// using Api, add names of the images being uploaded to a database\n  addToBackendUsingApi = (files) =>{\n\n      var userName = this.props.location.state.userName;\n\n      var fileNames = userName+\",\";\n      for(var x =0; x<files.length-1;x++)\n      {\n        fileNames = fileNames +files[x].name+ \",\";\n      }\n      fileNames = fileNames + files[files.length-1].name;\n      // api call\n      console.log(\"Calling GO API at 8080 : \")\n      console.log(fileNames)\n      axios.post(\"http:192.168.1.8:8080/insertimagedata\",fileNames)\n        .then(res => { // then print response status\n          //toast.success('upload success')\n          console.log(\"API message : \")\n          console.log(res)\n        })\n        .catch(err => { // then print response status\n        //  toast.error('upload fail')\n        console.log(err)\n        })\n}\n\nonChangeHandler=event=>{\n  var files = event.target.files\n  if(this.maxSelectFile(event) && this.checkMimeType(event) &&    this.checkFileSize(event)){\n  // if return true allow to setState\n     this.setState({\n     selectedFile: files,\n     loaded:0\n  })\n}\n}\n\nRedirecToEditPage = () =>{\n\n  var userName = this.props.location.state.userName;\n\n  this.props.history.push({\n    pathname: '/EditPage',\n    state: {userName: this.props.location.state.userName}\n})\n\n}\n  onClickHandler = () => {\n    const data = new FormData()\n\n// getting username from input\n    var userName = this.props.location.state.userName;\n\n// filling FormData with selectedFiles(Array of objects)\n    for(var x = 0; x<this.state.selectedFile.length; x++) {\n      data.append('file', this.state.selectedFile[x])\n    }\n\n// header carries information of username to backend with data\n    axios.post(\"http://192.168.1.8:4000/upload\",data,\n    {\n    headers: {\n      userName: userName\n    },\n      onUploadProgress: ProgressEvent => {\n        this.setState({\n          loaded: (ProgressEvent.loaded / ProgressEvent.total*100),\n        })\n      },\n    })\n      .then(res => { // then print response status\n        //toast.success('upload success')\n        this.addToBackendUsingApi(this.state.selectedFile)\n        console.log(\"Upload success:\\n\"+res)\n        // redirect to WorkingArea.js for viewing images\n      })\n      .catch(err => { // then print response status\n      //  toast.error('upload fail')\n      console.log(\"Upload fail\"+err)\n      })\n\n    }\n\n\n    componentDidMount(){\n    // set UserName\n      console.log(this.props.location.state.userName);\n    }\n\n  render() {\n    return (\n      <div class=\"container\">\n\t      <div class=\"row\">\n      \t  <div class=\"offset-md-3 col-md-6\">\n               <div class=\"form-group files\">\n                <label>Upload Your File </label>\n                <input id=\"input_upload\" type=\"file\" class=\"form-control\" multiple onChange={this.onChangeHandler}/>\n              </div>\n              <div class=\"form-group\">\n\n              <Progress max=\"100\" color=\"success\" value={this.state.loaded} >{Math.round(this.state.loaded,2) }%</Progress>\n\n              </div>\n\n              <button type=\"button\" class=\"buttonclass\" onClick={this.onClickHandler}>Upload</button>\n              <button type=\"button\" class=\"buttonclass\" onClick={this.RedirecToEditPage}>View Images</button>\n              <button type=\"button\" class=\"buttonclass\" onClick={this.Logout}>Log out</button>\n\n\t      </div>\n      </div>\n      </div>\n    );\n  }\n}\n\nexport default UploadMultipleFiles;\n"]},"metadata":{},"sourceType":"module"}